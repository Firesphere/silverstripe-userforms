{"version":3,"sources":["webpack:///webpack/bootstrap 46d5152f293876f4ff4f","webpack:///./client/src/bundles/UserForms.js","webpack:///external \"i18n\"","webpack:///external \"jQuery\""],"names":["jQuery","document","ready","$","userform","CONSTANTS","commonMixin","show","$el","attr","hide","ErrorContainer","element","find","text","i18n","_t","prototype","hasErrors","children","length","removeErrorMessage","fieldId","remove","addStepLink","step","itemID","$itemElement","stepID","stepTitle","data","on","e","preventDefault","jumpToStep","id","append","removeStepLink","closest","is","updateErrorMessage","$input","message","inputID","anchor","elementID","messageElement","describedBy","addClass","removeClass","html","each","location","pathname","search","match","RegExp","FormStep","self","$elButton","prop","viewed","valid","DISPLAY_ERROR_MESSAGES_AT_TOP","errorContainer","validator","errorList","i","error","trigger","conditionallyHidden","ProgressBar","$buttons","$jsAlign","stepButton","stepNumber","parseInt","target","update","$visibleButtons","filter","button","index","$button","leftPercent","leftPercentCssValue","buttonOffset","innerWidth","css","left","marginLeft","$newStepElement","barWidth","$element","$item","parent","removeAttr","siblings","width","FormActions","$prevButton","$nextButton","numberOfSteps","steps","currentStep","lastStep","UserForm","prevStep","nextStep","validate","validationOptions","a","field","rules","required","ignore","errorClass","errorElement","errorPlacement","parents","appendTo","insertAfter","invalidHandler","event","setTimeout","currentElements","first","focus","submitHandler","form","isValid","submit","success","errorId","substr","indexOf","replace","addStep","push","setCurrentStep","direction","targetStep","forward","main","userformElement","$userform","ENABLE_LIVE_VALIDATION","extend","onfocusout","HIDE_FIELD_LABELS","$label","progressBar","formActions","ssDatepicker","datepicker","setInterval","ajax","url","areYouSure"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;;;;;;;;AC5DA;AACA;;AAEA,8CAAAA,CAAOC,QAAP,EAAiBC,KAAjB,CAAuB,UAACC,CAAD,EAAO;AAE5B,MAAIC,WAAW,IAAf;;AAGA,MAAMC,YAAY,EAAlB;;AAGA,MAAMC,cAAc;AAKlBC,QALkB,kBAKX;AACL,WAAKC,GAAL,CAASC,IAAT,CAAc,aAAd,EAA6B,KAA7B,EAAoCF,IAApC;AACD,KAPiB;AAYlBG,QAZkB,kBAYX;AACL,WAAKF,GAAL,CAASC,IAAT,CAAc,aAAd,EAA6B,IAA7B,EAAmCC,IAAnC;AACD;AAdiB,GAApB;;AAwBA,WAASC,cAAT,CAAwBC,OAAxB,EAAiC;AAC/B,SAAKJ,GAAL,GAAWI,mBAAmBT,CAAnB,GAAuBS,OAAvB,GAAiCT,EAAES,OAAF,CAA5C;;AAGA,SAAKJ,GAAL,CAASK,IAAT,CAAc,IAAd,EAAoBC,IAApB,CAAyB,4CAAAC,CAAKC,EAAL,CAAQ,kCAAR,EACvB,oDADuB,CAAzB;;AAGA,WAAO,IAAP;AACD;;AAODL,iBAAeM,SAAf,CAAyBC,SAAzB,GAAqC,SAASA,SAAT,GAAqB;AACxD,WAAO,KAAKV,GAAL,CAASK,IAAT,CAAc,aAAd,EAA6BM,QAA7B,GAAwCC,MAAxC,GAAiD,CAAxD;AACD,GAFD;;AAQAT,iBAAeM,SAAf,CAAyBI,kBAAzB,GAA8C,SAASA,kBAAT,CAA4BC,OAA5B,EAAqC;AACjF,SAAKd,GAAL,CAASK,IAAT,OAAkBS,OAAlB,iBAAuCC,MAAvC;;AAGA,QAAI,CAAC,KAAKL,SAAL,EAAL,EAAuB;AACrB,WAAKR,IAAL;AACD;AACF,GAPD;;AAcAC,iBAAeM,SAAf,CAAyBO,WAAzB,GAAuC,SAASA,WAAT,CAAqBC,IAArB,EAA2B;AAChE,QAAMC,SAAYD,KAAKjB,GAAL,CAASC,IAAT,CAAc,IAAd,CAAZ,gBAAN;AACA,QAAIkB,eAAe,KAAKnB,GAAL,CAASK,IAAT,OAAkBa,MAAlB,CAAnB;AACA,QAAME,SAASH,KAAKjB,GAAL,CAASC,IAAT,CAAc,IAAd,CAAf;AACA,QAAMoB,YAAYJ,KAAKjB,GAAL,CAASsB,IAAT,CAAc,OAAd,CAAlB;;AAGA,QAAIH,aAAaP,MAAjB,EAAyB;AACvB;AACD;;AAEDO,mBAAexB,eAAauB,MAAb,oBAAkCE,MAAlC,UAA6CC,SAA7C,eAAf;;AAEAF,iBAAaI,EAAb,CAAgB,OAAhB,EAAyB,UAACC,CAAD,EAAO;AAC9BA,QAAEC,cAAF;AACA7B,eAAS8B,UAAT,CAAoBT,KAAKU,EAAzB;AACD,KAHD;;AAKA,SAAK3B,GAAL,CAASK,IAAT,CAAc,aAAd,EAA6BuB,MAA7B,CAAoCT,YAApC;AACD,GAnBD;;AA0BAhB,iBAAeM,SAAf,CAAyBoB,cAAzB,GAA0C,SAASA,cAAT,CAAwBf,OAAxB,EAAiC;AACzE,QAAMM,SAASzB,QAAMmB,OAAN,EAAiBgB,OAAjB,CAAyB,YAAzB,EAAuC7B,IAAvC,CAA4C,IAA5C,CAAf;;AAEA,SAAKD,GAAL,CAASK,IAAT,OAAkBe,MAAlB,kBAAuCL,MAAvC;;AAGA,QAAI,KAAKf,GAAL,CAASK,IAAT,CAAc,aAAd,EAA6B0B,EAA7B,CAAgC,QAAhC,CAAJ,EAA+C;AAC7C,WAAK7B,IAAL;AACD;AACF,GATD;;AAiBAC,iBAAeM,SAAf,CAAyBuB,kBAAzB,GAA8C,SAASA,kBAAT,CAA4BC,MAA5B,EAAoCC,OAApC,EAA6C;AAAA;;AACzF,QAAMC,UAAUF,OAAOhC,IAAP,CAAY,IAAZ,CAAhB;AACA,QAAImC,eAAaD,OAAjB;AACA,QAAME,YAAeF,OAAf,eAAN;AACA,QAAIG,iBAAiB3C,QAAM0C,SAAN,CAArB;AACA,QAAIE,cAAcN,OAAOhC,IAAP,CAAY,kBAAZ,CAAlB;;AAGA,QAAI,CAACiC,OAAL,EAAc;AAEZI,qBAAeE,QAAf,CAAwB,OAAxB;AACA;AACD;;AAEDF,mBAAeG,WAAf,CAA2B,OAA3B;;AAEA,SAAK1C,IAAL;;AAEA,QAAIuC,eAAe1B,MAAf,KAA0B,CAA9B,EAAiC;AAE/B0B,qBAAevC,IAAf,GAAsBM,IAAtB,CAA2B,GAA3B,EAAgCqC,IAAhC,CAAqCR,OAArC;AACD,KAHD,MAGO;AAELD,aAAOH,OAAP,CAAe,YAAf,EAA6Ba,IAA7B,CAAkC,YAAM;AACtCP,uBAAazC,SAAQM,IAAR,CAAa,IAAb,CAAb;AACD,OAFD;;AAKAqC,uBAAiB3C,EAAE,kBAAF,CAAjB;AACA2C,qBACGrC,IADH,CACQ,IADR,EACcoC,SADd,EAEGhC,IAFH,CAEQ,GAFR,EAGGJ,IAHH,CAGQ,MAHR,EAGgB2C,SAASC,QAAT,GAAoBD,SAASE,MAA7B,GAAsCV,MAHtD,EAIGM,IAJH,CAIQR,OAJR;;AAMA,WAAKlC,GAAL,CAASK,IAAT,CAAc,IAAd,EAAoBuB,MAApB,CAA2BU,cAA3B;;AAIA,UAAI,CAACC,WAAL,EAAkB;AAChBA,sBAAcF,SAAd;AACD,OAFD,MAEO,IAAI,CAACE,YAAYQ,KAAZ,CAAkB,IAAIC,MAAJ,SAAiBX,SAAjB,SAAlB,CAAL,EAA0D;AAE/DE,6BAAmBF,SAAnB;AACD;;AAEDJ,aAAOhC,IAAP,CAAY,kBAAZ,EAAgCsC,WAAhC;AACD;AACF,GAhDD;;AAyDA,WAASU,QAAT,CAAkB7C,OAAlB,EAA2B;AACzB,QAAM8C,OAAO,IAAb;;AAEA,SAAKlD,GAAL,GAAWI,mBAAmBT,CAAnB,GAAuBS,OAAvB,GAAiCT,EAAES,OAAF,CAA5C;;AAGA,SAAK+C,SAAL,GAAiBxD,uCAAoC,KAAKK,GAAL,CAASoD,IAAT,CAAc,IAAd,CAApC,SAAjB;;AAGA,SAAKC,MAAL,GAAc,KAAd;;AAIA,SAAKC,KAAL,GAAa,KAAb;;AAGA,SAAK3B,EAAL,GAAU,IAAV;;AAEA,SAAKzB,IAAL;;AAEA,QAAIL,UAAU0D,6BAAd,EAA6C;AAC3C,WAAKC,cAAL,GAAsB,IAAIrD,cAAJ,CAAmB,KAAKH,GAAL,CAASK,IAAT,CAAc,kBAAd,CAAnB,CAAtB;;AAGAT,eAASI,GAAT,CAAauB,EAAb,CAAgB,qBAAhB,EAAuC,UAACC,CAAD,EAAIiC,SAAJ,EAAkB;AAEvD,YAAI,CAACP,KAAKlD,GAAL,CAAS+B,EAAT,CAAY,UAAZ,CAAL,EAA8B;AAC5B;AACD;;AAGDpC,UAAEgD,IAAF,CAAOc,UAAUC,SAAjB,EAA4B,UAACC,CAAD,EAAIC,KAAJ,EAAc;AACxCV,eAAKM,cAAL,CAAoBxB,kBAApB,CAAuCrC,EAAEiE,MAAMxD,OAAR,CAAvC,EAAyDwD,MAAM1B,OAA/D;AACD,SAFD;AAGD,OAVD;;AAaAtC,eAASI,GAAT,CAAauB,EAAb,CAAgB,qBAAhB,EAAuC,UAACC,CAAD,EAAIV,OAAJ,EAAgB;AACrDoC,aAAKM,cAAL,CAAoB3C,kBAApB,CAAuCC,OAAvC;AACD,OAFD;AAGD;;AAGD,SACGqC,SADH,CAEG5B,EAFH,CAEM,yCAFN,EAEiD,YAAM;AACnD3B,eAASI,GAAT,CAAa6D,OAAb,CAAqB,+BAArB;AACD,KAJH;;AAMA,WAAO,IAAP;AACD;;AAQDZ,WAASxC,SAAT,CAAmBqD,mBAAnB,GAAyC,SAASA,mBAAT,GAA+B;AACtE,WAAO,CAAC,KAAKX,SAAL,CAAe9C,IAAf,CAAoB,QAApB,EAA8B0B,EAA9B,CAAiC,UAAjC,CAAR;AACD,GAFD;;AAWA,WAASgC,WAAT,CAAqB3D,OAArB,EAA8B;AAC5B,QAAM8C,OAAO,IAAb;;AAEA,SAAKlD,GAAL,GAAWI,mBAAmBT,CAAnB,GAAuBS,OAAvB,GAAiCT,EAAES,OAAF,CAA5C;AACA,SAAK4D,QAAL,GAAgB,KAAKhE,GAAL,CAASK,IAAT,CAAc,mBAAd,CAAhB;AACA,SAAK4D,QAAL,GAAgB,KAAKjE,GAAL,CAASK,IAAT,CAAc,WAAd,CAAhB;;AAGA,SAAK2D,QAAL,CAAcrB,IAAd,CAAmB,UAACgB,CAAD,EAAIO,UAAJ,EAAmB;AACpCvE,QAAEuE,UAAF,EAAc3C,EAAd,CAAiB,OAAjB,EAA0B,UAACC,CAAD,EAAO;AAC/BA,UAAEC,cAAF;AACA,YAAM0C,aAAaC,SAASzE,EAAE6B,EAAE6C,MAAJ,EAAY/C,IAAZ,CAAiB,MAAjB,CAAT,EAAmC,EAAnC,CAAnB;AACA4B,aAAKlD,GAAL,CAAS6D,OAAT,CAAiB,8BAAjB,EAAiDM,UAAjD;AACD,OAJD;AAKD,KAND;;AASAvE,aAASI,GAAT,CAAauB,EAAb,CAAgB,0BAAhB,EAA4C,UAACC,CAAD,EAAIJ,MAAJ,EAAe;AACzD8B,WAAKoB,MAAL,CAAYlD,MAAZ;AACD,KAFD;;AAOAxB,aAASI,GAAT,CAAauB,EAAb,CAAgB,+BAAhB,EAAiD,YAAM;AAErD,UAAMgD,kBAAkBrB,KAAKc,QAAL,CAAcQ,MAAd,CAAqB,UAArB,CAAxB;;AAEAD,sBAAgB5B,IAAhB,CAAqB,UAACgB,CAAD,EAAIc,MAAJ,EAAe;AAClC9E,UAAE8E,MAAF,EAAUnE,IAAV,CAAeqD,IAAI,CAAnB;AACD,OAFD;;AAKAT,WAAKlD,GAAL,CAASK,IAAT,CAAc,eAAd,EAA+BJ,IAA/B,CAAoC,eAApC,EAAqDsE,gBAAgB3D,MAArE;;AAGAsC,WAAKlD,GAAL,CAASK,IAAT,CAAc,oBAAd,EAAoCC,IAApC,CAAyCiE,gBAAgB3D,MAAzD;AACD,KAbD;;AAgBA,SAAKqD,QAAL,CAActB,IAAd,CAAmB,UAAC+B,KAAD,EAAQD,MAAR,EAAmB;AACpC,UAAME,UAAUhF,EAAE8E,MAAF,CAAhB;AACA,UAAMG,cAAc,OAAO1B,KAAKe,QAAL,CAAcrD,MAAd,GAAuB,CAA9B,IAAmC8D,KAAvD;AACA,UAAMG,sBAAyBD,WAAzB,MAAN;AACA,UAAME,eAAe,CAAC,CAAD,IAAMH,QAAQI,UAAR,KAAuB,CAA7B,CAArB;;AAEAJ,cAAQK,GAAR,CAAY;AACVC,cAAMJ,mBADI;AAEVK,oBAAYJ;AAFF,OAAZ;;AAMA,UAAIJ,UAAUxB,KAAKe,QAAL,CAAcrD,MAAd,GAAuB,CAArC,EAAwC;AACtC+D,gBAAQK,GAAR,CAAY,EAAEE,YAAYJ,eAAe,CAA7B,EAAZ;AACD,OAFD,MAEO,IAAIJ,UAAU,CAAd,EAAiB;AACtBC,gBAAQK,GAAR,CAAY,EAAEE,YAAY,CAAd,EAAZ;AACD;AACF,KAjBD;;AAmBA,WAAO,IAAP;AACD;;AAODnB,cAAYtD,SAAZ,CAAsB6D,MAAtB,GAA+B,SAASA,MAAT,CAAgBlD,MAAhB,EAAwB;AACrD,QAAM+D,kBAAkBxF,EAAEA,EAAE,YAAF,EAAgByB,MAAhB,CAAF,CAAxB;AACA,QAAI+C,aAAa,CAAjB;AACA,QAAIiB,WAAWhE,UAAU,KAAK4C,QAAL,CAAcpD,MAAd,GAAuB,CAAjC,IAAsC,GAArD;;AAGA,SAAKoD,QAAL,CAAcrB,IAAd,CAAmB,UAACgB,CAAD,EAAIc,MAAJ,EAAe;AAChC,UAAId,IAAIvC,MAAR,EAAgB;AAEd,eAAO,KAAP;AACD;;AAED,UAAIzB,EAAE8E,MAAF,EAAU1C,EAAV,CAAa,UAAb,CAAJ,EAA8B;AAC5BoC,sBAAc,CAAd;AACD;AACD,aAAO,IAAP;AACD,KAVD;;AAaA,SAAKnE,GAAL,CAASK,IAAT,CAAc,sBAAd,EAAsCsC,IAAtC,CAA2C,UAACgB,CAAD,EAAIvD,OAAJ,EAAgB;AACzDT,QAAES,OAAF,EAAWE,IAAX,CAAgB6D,UAAhB;AACD,KAFD;;AAKA,SAAKnE,GAAL,CAASK,IAAT,CAAc,iBAAd,EAAiCsC,IAAjC,CAAsC,UAACgB,CAAD,EAAIvD,OAAJ,EAAgB;AACpDT,QAAES,OAAF,EAAWH,IAAX,CAAgB,eAAhB,EAAiCkE,UAAjC;AACD,KAFD;;AAKA,SAAKH,QAAL,CAAcrB,IAAd,CAAmB,UAACgB,CAAD,EAAIvD,OAAJ,EAAgB;AACjC,UAAMiF,WAAW1F,EAAES,OAAF,CAAjB;AACA,UAAMkF,QAAQD,SAASE,MAAT,EAAd;;AAEA,UAAInB,SAASiB,SAAS/D,IAAT,CAAc,MAAd,CAAT,EAAgC,EAAhC,MAAwC6C,UAAxC,IAAsDkB,SAAStD,EAAT,CAAY,UAAZ,CAA1D,EAAmF;AACjFuD,cAAM9C,QAAN,CAAe,gBAAf;AACA6C,iBAASG,UAAT,CAAoB,UAApB;;AAEA;AACD;;AAEDF,YAAM7C,WAAN,CAAkB,SAAlB;AACD,KAZD;;AAeA,SAAKzC,GAAL,CAASyF,QAAT,CAAkB,iBAAlB,EAAqCnF,IAArC,CAA0C6E,gBAAgB7D,IAAhB,CAAqB,OAArB,CAA1C;;AAGA8D,eAAWA,WAAcA,QAAd,SAA4B,EAAvC;AACA,SAAKpF,GAAL,CAASK,IAAT,CAAc,eAAd,EAA+BqF,KAA/B,CAAqCN,QAArC;AACD,GAjDD;;AAyDA,WAASO,WAAT,CAAqBvF,OAArB,EAA8B;AAC5B,QAAM8C,OAAO,IAAb;;AAEA,SAAKlD,GAAL,GAAWI,mBAAmBT,CAAnB,GAAuBS,OAAvB,GAAiCT,EAAES,OAAF,CAA5C;;AAEA,SAAKwF,WAAL,GAAmB,KAAK5F,GAAL,CAASK,IAAT,CAAc,mBAAd,CAAnB;AACA,SAAKwF,WAAL,GAAmB,KAAK7F,GAAL,CAASK,IAAT,CAAc,mBAAd,CAAnB;;AAGA,SAAKuF,WAAL,CAAiBL,MAAjB,GAA0BtF,IAA1B,CAA+B,aAA/B,EAA8C,KAA9C,EAAqDF,IAArD;AACA,SAAK8F,WAAL,CAAiBN,MAAjB,GAA0BtF,IAA1B,CAA+B,aAA/B,EAA8C,KAA9C,EAAqDF,IAArD;;AAGA,SAAK6F,WAAL,CAAiBrE,EAAjB,CAAoB,OAApB,EAA6B,UAACC,CAAD,EAAO;AAClCA,QAAEC,cAAF;AACAyB,WAAKlD,GAAL,CAAS6D,OAAT,CAAiB,sBAAjB;AACD,KAHD;AAIA,SAAKgC,WAAL,CAAiBtE,EAAjB,CAAoB,OAApB,EAA6B,UAACC,CAAD,EAAO;AAClCA,QAAEC,cAAF;AACAyB,WAAKlD,GAAL,CAAS6D,OAAT,CAAiB,sBAAjB;AACD,KAHD;;AAOAjE,aAASI,GAAT,CAAauB,EAAb,CAAgB,wDAAhB,EAA0E,YAAM;AAC9E2B,WAAKoB,MAAL;AACD,KAFD;;AAIA,WAAO,IAAP;AACD;;AAODqB,cAAYlF,SAAZ,CAAsB6D,MAAtB,GAA+B,SAASA,MAAT,GAAkB;AAC/C,QAAMwB,gBAAgBlG,SAASmG,KAAT,CAAenF,MAArC;AACA,QAAMQ,SAASxB,SAASoG,WAAT,GAAuBpG,SAASoG,WAAT,CAAqBrE,EAA5C,GAAiD,CAAhE;AACA,QAAIgC,IAAI,IAAR;AACA,QAAIsC,WAAW,IAAf;;AAGA,SAAKjG,GAAL,CAASK,IAAT,CAAc,mBAAd,EAAmCe,WAAW,CAAX,GAAe,MAAf,GAAwB,MAA3D;;AAGA,SAAKuC,IAAImC,gBAAgB,CAAzB,EAA4BnC,KAAK,CAAjC,EAAoCA,GAApC,EAAyC;AACvCsC,iBAAWrG,SAASmG,KAAT,CAAepC,CAAf,CAAX;;AAGA,UAAIsC,SAASnC,mBAAT,EAAJ,EAAoC;AAClC;AACD;;AAGD,WAAK9D,GAAL,CAASK,IAAT,CAAc,mBAAd,EAAmCe,UAAUuC,CAAV,GAAc,MAAd,GAAuB,MAA1D;;AAGA,WAAK3D,GAAL,CAASK,IAAT,CAAc,UAAd,EAA0Be,UAAUuC,CAAV,GAAc,MAAd,GAAuB,MAAjD;;AAGA;AACD;AACF,GA3BD;;AAoCA,WAASuC,QAAT,CAAkB9F,OAAlB,EAA2B;AACzB,QAAM8C,OAAO,IAAb;;AAEA,SAAKlD,GAAL,GAAWI,mBAAmBT,CAAnB,GAAuBS,OAAvB,GAAiCT,EAAES,OAAF,CAA5C;AACA,SAAK2F,KAAL,GAAa,EAAb;;AAGA,SAAKvC,cAAL,GAAsB,IAAIrD,cAAJ,CAAmB,KAAKH,GAAL,CAASW,QAAT,CAAkB,kBAAlB,CAAnB,CAAtB;;AAGA,SAAKX,GAAL,CAASuB,EAAT,CAAY,sBAAZ,EAAoC,YAAM;AACxC2B,WAAKiD,QAAL;AACD,KAFD;AAGA,SAAKnG,GAAL,CAASuB,EAAT,CAAY,sBAAZ,EAAoC,YAAM;AACxC2B,WAAKkD,QAAL;AACD,KAFD;;AAKAzG,MAAE,oBAAF,EAAwB4B,EAAxB,CAA2B,8BAA3B,EAA2D,UAACC,CAAD,EAAI2C,UAAJ,EAAmB;AAC5EjB,WAAKxB,UAAL,CAAgByC,aAAa,CAA7B;AACD,KAFD;;AAKA,SAAKnE,GAAL,CAASuB,EAAT,CAAY,qBAAZ,EAAmC,UAACC,CAAD,EAAIV,OAAJ,EAAgB;AACjDoC,WAAKM,cAAL,CAAoB3B,cAApB,CAAmCf,OAAnC;AACD,KAFD;;AAIA,SAAKd,GAAL,CAASqG,QAAT,CAAkB,KAAKC,iBAAvB;;AAGA3G,MAAE,gCAAF,EAAoCgD,IAApC,CAAyC,UAAC4D,CAAD,EAAIC,KAAJ,EAAc;AACrD7G,QAAE6G,KAAF,EAASC,KAAT,CAAe,KAAf,EAAsB;AACpBC,kBAAU;AADU,OAAtB;AAGD,KAJD;;AAMA,WAAO,IAAP;AACD;;AAKDR,WAASzF,SAAT,CAAmB6F,iBAAnB,GAAuC;AACrCK,YAAQ,YAD6B;AAErCC,gBAAY,OAFyB;AAGrCC,kBAAc,MAHuB;AAIrCC,oBAAgB,wBAAClD,KAAD,EAAQxD,OAAR,EAAoB;AAClCwD,YAAMpB,QAAN,CAAe,SAAf;;AAEA,UAAIpC,QAAQ2B,EAAR,CAAW,QAAX,KAAwB3B,QAAQ2G,OAAR,CAAgB,cAAhB,EAAgCnG,MAAhC,GAAyC,CAArE,EAAwE;AACtEgD,cAAMoD,QAAN,CAAe5G,QAAQ0B,OAAR,CAAgB,eAAhB,CAAf;AACD,OAFD,MAEO,IAAI1B,QAAQ2G,OAAR,CAAgB,WAAhB,EAA6BnG,MAA7B,GAAsC,CAA1C,EAA6C;AAClDgD,cAAMoD,QAAN,CAAe5G,QAAQ0B,OAAR,CAAgB,QAAhB,CAAf;AACD,OAFM,MAEA;AACL8B,cAAMqD,WAAN,CAAkB7G,OAAlB;AACD;AACF,KAdoC;AAerC8G,oBAAgB,wBAACC,KAAD,EAAQ1D,SAAR,EAAsB;AAEpC2D,iBAAW,YAAM;AACf3D,kBAAU4D,eAAV,CAA0B7C,MAA1B,CAAiC,QAAjC,EAA2C8C,KAA3C,GAAmDC,KAAnD;AACD,OAFD,EAEG,CAFH;AAGD,KApBoC;;AAwBrCC,mBAAe,uBAACC,IAAD,EAAU;AACvB,UAAIC,UAAU,IAAd;;AAGA,UAAI9H,SAASoG,WAAb,EAA0B;AACxBpG,iBAASoG,WAAT,CAAqB1C,KAArB,GAA6B3D,EAAE8H,IAAF,EAAQnE,KAAR,EAA7B;AACD;;AAGD3D,QAAEgD,IAAF,CAAO/C,SAASmG,KAAhB,EAAuB,UAACpC,CAAD,EAAI1C,IAAJ,EAAa;AAClC,YAAI,CAACA,KAAKqC,KAAN,IAAe,CAACrC,KAAK6C,mBAAL,EAApB,EAAgD;AAC9C4D,oBAAU,KAAV;AACA9H,mBAAS4D,cAAT,CAAwBxC,WAAxB,CAAoCC,IAApC;AACD;AACF,OALD;;AAOA,UAAIyG,OAAJ,EAAa;AAEX,YAAMlB,QAAQ7G,EAAE8H,IAAF,EAAQpH,IAAR,CAAa,iCAAb,CAAd;AACAmG,cAAMhB,UAAN,CAAiB,2CAAjB;;AAGA7F,UAAE8H,IAAF,EAAQhF,WAAR,CAAoB,OAApB;;AAEAgF,aAAKE,MAAL;AACD,OATD,MASO;AACL/H,iBAAS4D,cAAT,CAAwBzD,IAAxB;AACD;AACF,KApDoC;;AAsDrC6H,aAAS,iBAAChE,KAAD,EAAW;AAClB,UAAMiE,UAAUlI,EAAEiE,KAAF,EAAS3D,IAAT,CAAc,IAAd,CAAhB;AACA,UAAMa,UAAU+G,QAAQC,MAAR,CAAe,CAAf,EAAkBD,QAAQE,OAAR,CAAgB,QAAhB,CAAlB,EAA6CC,OAA7C,CAAqD,UAArD,EAAiE,EAAjE,CAAhB;;AAMApE,YAAM7C,MAAN;;AAGAnB,eAASI,GAAT,CAAa6D,OAAb,CAAqB,qBAArB,EAA4C,CAAC/C,OAAD,CAA5C;AACD;AAlEoC,GAAvC;;AA0EAoF,WAASzF,SAAT,CAAmBwH,OAAnB,GAA6B,SAASA,OAAT,CAAiBhH,IAAjB,EAAuB;AAElD,QAAI,CAACA,IAAD,YAAiBgC,QAArB,EAA+B;AAC7B;AACD;;AAGDhC,SAAKU,EAAL,GAAU,KAAKoE,KAAL,CAAWnF,MAArB;;AAEA,SAAKmF,KAAL,CAAWmC,IAAX,CAAgBjH,IAAhB;AACD,GAVD;;AAiBAiF,WAASzF,SAAT,CAAmB0H,cAAnB,GAAoC,SAASA,cAAT,CAAwBlH,IAAxB,EAA8B;AAEhE,QAAI,EAAEA,gBAAgBgC,QAAlB,CAAJ,EAAiC;AAC/B;AACD;;AAED,SAAK+C,WAAL,GAAmB/E,IAAnB;AACA,SAAK+E,WAAL,CAAiBjG,IAAjB;;AAGA,SAAKiG,WAAL,CAAiB3C,MAAjB,GAA0B,IAA1B;AACA,SAAK2C,WAAL,CAAiBhG,GAAjB,CAAqBwC,QAArB,CAA8B,QAA9B;AACD,GAZD;;AAoBA0D,WAASzF,SAAT,CAAmBiB,UAAnB,GAAgC,SAASA,UAAT,CAAoByC,UAApB,EAAgCiE,SAAhC,EAA2C;AACzE,QAAMC,aAAa,KAAKtC,KAAL,CAAW5B,UAAX,CAAnB;AACA,QAAIuD,UAAU,KAAd;AACA,QAAMY,UAAUF,cAAc,KAAK,CAAnB,GAAuB,IAAvB,GAA8BA,SAA9C;;AAGA,QAAIC,eAAe,KAAK,CAAxB,EAA2B;AACzB;AACD;;AAID,QAAIA,WAAWvE,mBAAX,EAAJ,EAAsC;AACpC,UAAIwE,OAAJ,EAAa;AACX,aAAK5G,UAAL,CAAgByC,aAAa,CAA7B;AACD,OAFD,MAEO;AACL,aAAKzC,UAAL,CAAgByC,aAAa,CAA7B;AACD;;AAED;AACD;;AAMDuD,cAAU,KAAK1H,GAAL,CAASsD,KAAT,EAAV;;AAGA,SAAK0C,WAAL,CAAiB1C,KAAjB,GAAyBoE,OAAzB;;AAGA,QAAIA,YAAY,KAAZ,IAAqBW,WAAWhF,MAAX,KAAsB,KAA/C,EAAsD;AACpD;AACD;;AAED,SAAK2C,WAAL,CAAiB9F,IAAjB;AACA,SAAKiI,cAAL,CAAoBE,UAApB;;AAEA,SAAKrI,GAAL,CAAS6D,OAAT,CAAiB,0BAAjB,EAA6C,CAACwE,WAAW1G,EAAZ,CAA7C;AACD,GAxCD;;AA8CAuE,WAASzF,SAAT,CAAmB2F,QAAnB,GAA8B,SAASA,QAAT,GAAoB;AAChD,SAAK1E,UAAL,CAAgB,KAAKqE,KAAL,CAAWgC,OAAX,CAAmB,KAAK/B,WAAxB,IAAuC,CAAvD,EAA0D,IAA1D;AACD,GAFD;;AAQAE,WAASzF,SAAT,CAAmB0F,QAAnB,GAA8B,SAASA,QAAT,GAAoB;AAChD,SAAKzE,UAAL,CAAgB,KAAKqE,KAAL,CAAWgC,OAAX,CAAmB,KAAK/B,WAAxB,IAAuC,CAAvD,EAA0D,KAA1D;AACD,GAFD;;AAQA,WAASuC,IAAT,CAAc7D,KAAd,EAAqB8D,eAArB,EAAsC;AAAA;;AACpC,QAAMC,YAAY9I,EAAE6I,eAAF,CAAlB;;AAGA,QAAIC,UAAU7H,MAAV,KAAqB,CAAzB,EAA4B;AAC1B;AACD;;AAEDf,cAAU6I,sBAAV,GAAmCD,UAAUnH,IAAV,CAAe,gBAAf,MAAqC,KAAK,CAA7E;AACAzB,cAAU0D,6BAAV,GAA0CkF,UAAUnH,IAAV,CAAe,WAAf,MAAgC,KAAK,CAA/E;;AAIA,QAAIzB,UAAU6I,sBAAV,KAAqC,KAAzC,EAAgD;AAC9C/I,QAAEgJ,MAAF,CAASzC,SAASzF,SAAT,CAAmB6F,iBAA5B,EAA+C;AAC7CsC,oBAAY;AADiC,OAA/C;AAGD;;AAED,QAAI/I,UAAU0D,6BAAd,EAA6C;AAC3C5D,QAAEgJ,MAAF,CAASzC,SAASzF,SAAT,CAAmB6F,iBAA5B,EAA+C;AAE7CY,wBAAgB,wBAACC,KAAD,EAAQ1D,SAAR,EAAsB;AACpCgF,oBAAU5E,OAAV,CAAkB,qBAAlB,EAAyC,CAACJ,SAAD,CAAzC;AACD,SAJ4C;AAK7CmF,oBAAY;AALiC,OAA/C;AAOD;;AAGDjJ,MAAE,sCAAF,EAA0CM,IAA1C,CAA+C,aAA/C,EAA8D,KAA9D,EAAqEF,IAArE;;AAGAJ,MAAEgJ,MAAF,CAAS1F,SAASxC,SAAlB,EAA6BX,WAA7B;AACAH,MAAEgJ,MAAF,CAASxI,eAAeM,SAAxB,EAAmCX,WAAnC;;AAEAF,eAAW,IAAIsG,QAAJ,CAAauC,SAAb,CAAX;;AAGA,QAAI5I,UAAUgJ,iBAAd,EAAiC;AAC/BJ,gBAAUpI,IAAV,CAAe,YAAf,EAA6BsC,IAA7B,CAAkC,YAAM;AACtC,YAAMmG,SAASnJ,SAAf;;AAEAA,sBAAYmJ,OAAO7I,IAAP,CAAY,KAAZ,CAAZ,SAAoCA,IAApC,CAAyC,aAAzC,EAAwD6I,OAAOxI,IAAP,EAAxD;AACAwI,eAAO/H,MAAP;AACD,OALD;AAMD;;AAGDnB,aAASI,GAAT,CAAaK,IAAb,CAAkB,YAAlB,EAAgCsC,IAAhC,CAAqC,UAACgB,CAAD,EAAIvD,OAAJ,EAAgB;AACnD,UAAMa,OAAO,IAAIgC,QAAJ,CAAa7C,OAAb,CAAb;;AAEAR,eAASqI,OAAT,CAAiBhH,IAAjB;AACD,KAJD;;AAMArB,aAASuI,cAAT,CAAwBvI,SAASmG,KAAT,CAAe,CAAf,CAAxB;;AAGA,QAAMgD,cAAc,IAAIhF,WAAJ,CAAgBpE,EAAE,oBAAF,CAAhB,CAApB;AACAoJ,gBAAYzE,MAAZ,CAAmB,CAAnB;;AAEA,QAAM0E,cAAc,IAAIrD,WAAJ,CAAgBhG,EAAE,kBAAF,CAAhB,CAApB;AACAqJ,gBAAY1E,MAAZ;;AAGA3E,MAAEF,QAAF,EAAY8B,EAAZ,CAAe,OAAf,EAAwB,+BAAxB,EAAyD,YAAM;AAC7D,UAAM8D,WAAW1F,SAAjB;;AAEA0F,eAAS4D,YAAT;;AAEA,UAAI5D,SAAS/D,IAAT,CAAc,YAAd,CAAJ,EAAiC;AAC/B+D,iBAAS6D,UAAT,CAAoB,MAApB;AACD;AACF,KARD;;AAWAC,gBAAY,YAAM;AAChBxJ,QAAEyJ,IAAF,CAAO,EAAEC,KAAK,gCAAP,EAAP;AACD,KAFD,EAEG,MAAM,IAFT;;AAKA,QAAM5B,OAAO9H,EAAE,eAAF,CAAb;AACA,QAAI,OAAO8H,KAAK6B,UAAZ,KAA2B,WAA/B,EAA4C;AAC1C7B,WAAK6B,UAAL,CAAgB;AACdpH,iBAAS,4CAAA3B,CAAKC,EAAL,CAAQ,8BAAR,EAAwC,2BAAxC;AADK,OAAhB;AAGD;AACF;;AAEDb,IAAE,WAAF,EAAegD,IAAf,CAAoB4F,IAApB;AACD,CAnuBD,E;;;;;;;;;;;;;;;;ACPA,sB;;;;;;ACAA,wB","file":"js/userforms.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 46d5152f293876f4ff4f","/**\r\n * @file Manages the multi-step navigation.\r\n */\r\n\r\nimport jQuery from 'jquery';\r\nimport i18n from 'i18n';\r\n\r\njQuery(document).ready(($) => {\r\n  // A reference to the UserForm instance.\r\n  let userform = null;\r\n\r\n  // Settings that come from the CMS.\r\n  const CONSTANTS = {};\r\n\r\n  // Common functions that extend multiple classes.\r\n  const commonMixin = {\r\n    /**\r\n     * @func show\r\n     * @desc Show the form step. Looks after aria attributes too.\r\n     */\r\n    show() {\r\n      this.$el.attr('aria-hidden', false).show();\r\n    },\r\n    /**\r\n     * @func hide\r\n     * @desc Hide the form step. Looks after aria attributes too.\r\n     */\r\n    hide() {\r\n      this.$el.attr('aria-hidden', true).hide();\r\n    },\r\n  };\r\n\r\n  /**\r\n   * @func ErrorContainer\r\n   * @constructor\r\n   * @param {object} element - The error container element.\r\n   * @return {object} - The ErrorContainer instance.\r\n   * @desc Creates an error container. Used to display step error messages at the top.\r\n   */\r\n  function ErrorContainer(element) {\r\n    this.$el = element instanceof $ ? element : $(element);\r\n\r\n    // Set the error container's heading.\r\n    this.$el.find('h4').text(i18n._t('UserForms.ERROR_CONTAINER_HEADER',\r\n      'Please correct the following errors and try again:'));\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @func hasErrors\r\n   * @return boolean\r\n   * @desc Checks if the error container has any error messages.\r\n   */\r\n  ErrorContainer.prototype.hasErrors = function hasErrors() {\r\n    return this.$el.find('.error-list').children().length > 0;\r\n  };\r\n\r\n  /**\r\n   * @func removeErrorMessage\r\n   * @desc Removes an error message from the error container.\r\n   */\r\n  ErrorContainer.prototype.removeErrorMessage = function removeErrorMessage(fieldId) {\r\n    this.$el.find(`#${fieldId}-top-error`).remove();\r\n\r\n    // If there are no more error then hide the container.\r\n    if (!this.hasErrors()) {\r\n      this.hide();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @func addStepLink\r\n   * @param {object} step - FormStep instance.\r\n   * @desc Adds a link to a form step as an error message.\r\n   */\r\n  ErrorContainer.prototype.addStepLink = function addStepLink(step) {\r\n    const itemID = `${step.$el.attr('id')}-error-link`;\r\n    let $itemElement = this.$el.find(`#${itemID}`);\r\n    const stepID = step.$el.attr('id');\r\n    const stepTitle = step.$el.data('title');\r\n\r\n    // If the item already exists we don't need to do anything.\r\n    if ($itemElement.length) {\r\n      return;\r\n    }\r\n\r\n    $itemElement = $(`<li id=\"${itemID}\"><a href=\"#${stepID}\">${stepTitle}</a></li>`);\r\n\r\n    $itemElement.on('click', (e) => {\r\n      e.preventDefault();\r\n      userform.jumpToStep(step.id);\r\n    });\r\n\r\n    this.$el.find('.error-list').append($itemElement);\r\n  };\r\n\r\n  /**\r\n   * @func removeStepLink\r\n   * @param {object} step - FormStep instance.\r\n   * @desc Removes a step link from the error container.\r\n   */\r\n  ErrorContainer.prototype.removeStepLink = function removeStepLink(fieldId) {\r\n    const stepID = $(`#${fieldId}`).closest('.form-step').attr('id');\r\n\r\n    this.$el.find(`#${stepID}-error-link`).remove();\r\n\r\n    // Hide the error container if we've just removed the last error.\r\n    if (this.$el.find('.error-list').is(':empty')) {\r\n      this.hide();\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @func ErrorContainer.updateErrorMessage\r\n   * @param {object} $input - The jQuery input object which contains the field to validate.\r\n   * @param {object} message - The error message to display (html escaped).\r\n   * @desc Update an error message (displayed at the top of the form).\r\n   */\r\n  ErrorContainer.prototype.updateErrorMessage = function updateErrorMessage($input, message) {\r\n    const inputID = $input.attr('id');\r\n    let anchor = `#${inputID}`;\r\n    const elementID = `${inputID}-top-error`;\r\n    let messageElement = $(`#${elementID}`);\r\n    let describedBy = $input.attr('aria-describedby');\r\n\r\n    // The 'message' param will be an empty string if the field is valid.\r\n    if (!message) {\r\n      // Style issues as fixed if they already exist\r\n      messageElement.addClass('fixed');\r\n      return;\r\n    }\r\n\r\n    messageElement.removeClass('fixed');\r\n\r\n    this.show();\r\n\r\n    if (messageElement.length === 1) {\r\n      // Update the existing error message.\r\n      messageElement.show().find('a').html(message);\r\n    } else {\r\n      // Generate better link to field\r\n      $input.closest('.field[id]').each(() => {\r\n        anchor = `#${$(this).attr('id')}`;\r\n      });\r\n\r\n      // Add a new error message\r\n      messageElement = $('<li><a></a></li>');\r\n      messageElement\r\n        .attr('id', elementID)\r\n        .find('a')\r\n        .attr('href', location.pathname + location.search + anchor)\r\n        .html(message);\r\n\r\n      this.$el.find('ul').append(messageElement);\r\n\r\n      // Link back to original input via aria\r\n      // Respect existing non-error aria-describedby\r\n      if (!describedBy) {\r\n        describedBy = elementID;\r\n      } else if (!describedBy.match(new RegExp(`\\\\b${elementID}\\\\b`))) {\r\n        // Add to end of list if not already present\r\n        describedBy += ` ${elementID}`;\r\n      }\r\n\r\n      $input.attr('aria-describedby', describedBy);\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @func FormStep\r\n   * @constructor\r\n   * @param {object} element\r\n   * @return {object} - The FormStep instance.\r\n   * @desc Creates a form step.\r\n   */\r\n  function FormStep(element) {\r\n    const self = this;\r\n\r\n    this.$el = element instanceof $ ? element : $(element);\r\n\r\n    // Find button for this step\r\n    this.$elButton = $(`.step-button-wrapper[data-for='${this.$el.prop('id')}']`);\r\n\r\n    // Has the step been viewed by the user?\r\n    this.viewed = false;\r\n\r\n    // Is the form step valid?\r\n    // This value is used on form submission, which fails, if any of the steps are invalid.\r\n    this.valid = false;\r\n\r\n    // The internal id of the step. Used for getting the step from the UserForm.steps array.\r\n    this.id = null;\r\n\r\n    this.hide();\r\n\r\n    if (CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP) {\r\n      this.errorContainer = new ErrorContainer(this.$el.find('.error-container'));\r\n\r\n      // Listen for errors on the UserForm.\r\n      userform.$el.on('userform.form.error', (e, validator) => {\r\n        // The step only cares about errors if it's currently visible.\r\n        if (!self.$el.is(':visible')) {\r\n          return;\r\n        }\r\n\r\n        // Add or update each error in the list.\r\n        $.each(validator.errorList, (i, error) => {\r\n          self.errorContainer.updateErrorMessage($(error.element), error.message);\r\n        });\r\n      });\r\n\r\n      // Listen for fields becoming valid\r\n      userform.$el.on('userform.form.valid', (e, fieldId) => {\r\n        self.errorContainer.removeErrorMessage(fieldId);\r\n      });\r\n    }\r\n\r\n    // Ensure that page visibilty updates the step navigation\r\n    this\r\n      .$elButton\r\n      .on('userform.field.hide userform.field.show', () => {\r\n        userform.$el.trigger('userform.form.conditionalstep');\r\n      });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * Determine if this step is conditionally disabled\r\n   *\r\n   * @returns {Boolean}\r\n   */\r\n  // Because the element itself could be visible but 0 height, so check visibility of button\r\n  FormStep.prototype.conditionallyHidden = function conditionallyHidden() {\r\n    return !this.$elButton.find('button').is(':visible');\r\n  };\r\n\r\n  /**\r\n   * @func ProgressBar\r\n   * @constructor\r\n   * @param {object} element\r\n   * @return {object} - The Progress bar instance.\r\n   * @desc Creates a progress bar.\r\n   */\r\n  function ProgressBar(element) {\r\n    const self = this;\r\n\r\n    this.$el = element instanceof $ ? element : $(element);\r\n    this.$buttons = this.$el.find('.step-button-jump');\r\n    this.$jsAlign = this.$el.find('.js-align');\r\n\r\n    // Update the progress bar when 'step' buttons are clicked.\r\n    this.$buttons.each((i, stepButton) => {\r\n      $(stepButton).on('click', (e) => {\r\n        e.preventDefault();\r\n        const stepNumber = parseInt($(e.target).data('step'), 10);\r\n        self.$el.trigger('userform.progress.changestep', stepNumber);\r\n      });\r\n    });\r\n\r\n    // Update the progress bar when 'prev' and 'next' buttons are clicked.\r\n    userform.$el.on('userform.form.changestep', (e, stepID) => {\r\n      self.update(stepID);\r\n    });\r\n\r\n    // Listen for steps being conditionally shown / hidden by display rules.\r\n    // We need to update step related UI like the number of step buttons\r\n    // and any text that shows the total number of steps.\r\n    userform.$el.on('userform.form.conditionalstep', () => {\r\n      // Update the step numbers on the buttons.\r\n      const $visibleButtons = self.$buttons.filter(':visible');\r\n\r\n      $visibleButtons.each((i, button) => {\r\n        $(button).text(i + 1);\r\n      });\r\n\r\n      // Update the actual progress bar.\r\n      self.$el.find('.progress-bar').attr('aria-valuemax', $visibleButtons.length);\r\n\r\n      // Update any text that uses the total number of steps.\r\n      self.$el.find('.total-step-number').text($visibleButtons.length);\r\n    });\r\n\r\n    // Spaces out the steps below progress bar evenly\r\n    this.$jsAlign.each((index, button) => {\r\n      const $button = $(button);\r\n      const leftPercent = 100 / (self.$jsAlign.length - 1) * index;\r\n      const leftPercentCssValue = `${leftPercent}%`;\r\n      const buttonOffset = -1 * ($button.innerWidth() / 2);\r\n\r\n      $button.css({\r\n        left: leftPercentCssValue,\r\n        marginLeft: buttonOffset,\r\n      });\r\n\r\n      // First and last buttons are kept within userform-progress container\r\n      if (index === self.$jsAlign.length - 1) {\r\n        $button.css({ marginLeft: buttonOffset * 2 });\r\n      } else if (index === 0) {\r\n        $button.css({ marginLeft: 0 });\r\n      }\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @func ProgressBar.update\r\n   * @param {number} stepID - Zero based index of the new step.\r\n   * @desc Update the progress element to show a new step.\r\n   */\r\n  ProgressBar.prototype.update = function update(stepID) {\r\n    const $newStepElement = $($('.form-step')[stepID]);\r\n    let stepNumber = 0;\r\n    let barWidth = stepID / (this.$buttons.length - 1) * 100;\r\n\r\n    // Set the current step number.\r\n    this.$buttons.each((i, button) => {\r\n      if (i > stepID) {\r\n        // Break the loop\r\n        return false;\r\n      }\r\n\r\n      if ($(button).is(':visible')) {\r\n        stepNumber += 1;\r\n      }\r\n      return true;\r\n    });\r\n\r\n    // Update elements that contain the current step number.\r\n    this.$el.find('.current-step-number').each((i, element) => {\r\n      $(element).text(stepNumber);\r\n    });\r\n\r\n    // Update aria attributes.\r\n    this.$el.find('[aria-valuenow]').each((i, element) => {\r\n      $(element).attr('aria-valuenow', stepNumber);\r\n    });\r\n\r\n    // Update the CSS classes on step buttons.\r\n    this.$buttons.each((i, element) => {\r\n      const $element = $(element);\r\n      const $item = $element.parent();\r\n\r\n      if (parseInt($element.data('step'), 10) === stepNumber && $element.is(':visible')) {\r\n        $item.addClass('current viewed');\r\n        $element.removeAttr('disabled');\r\n\r\n        return;\r\n      }\r\n\r\n      $item.removeClass('current');\r\n    });\r\n\r\n    // Update the progress bar's title with the new step's title.\r\n    this.$el.siblings('.progress-title').text($newStepElement.data('title'));\r\n\r\n    // Update the width of the progress bar.\r\n    barWidth = barWidth ? `${barWidth}%` : '';\r\n    this.$el.find('.progress-bar').width(barWidth);\r\n  };\r\n\r\n  /**\r\n   * @func FormActions\r\n   * @constructor\r\n   * @param {object} element\r\n   * @desc Creates the navigation and actions (Prev, Next, Submit buttons).\r\n   */\r\n  function FormActions(element) {\r\n    const self = this;\r\n\r\n    this.$el = element instanceof $ ? element : $(element);\r\n\r\n    this.$prevButton = this.$el.find('.step-button-prev');\r\n    this.$nextButton = this.$el.find('.step-button-next');\r\n\r\n    // Show the buttons.\r\n    this.$prevButton.parent().attr('aria-hidden', false).show();\r\n    this.$nextButton.parent().attr('aria-hidden', false).show();\r\n\r\n    // Bind the step navigation event listeners.\r\n    this.$prevButton.on('click', (e) => {\r\n      e.preventDefault();\r\n      self.$el.trigger('userform.action.prev');\r\n    });\r\n    this.$nextButton.on('click', (e) => {\r\n      e.preventDefault();\r\n      self.$el.trigger('userform.action.next');\r\n    });\r\n\r\n    // Listen for changes to the current form step, or conditional pages,\r\n    // so we can show hide buttons appropriately.\r\n    userform.$el.on('userform.form.changestep userform.form.conditionalstep', () => {\r\n      self.update();\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /**\r\n   * @func FormActions.update\r\n   * @param {number} stepID - Zero based ID of the current step.\r\n   * @desc Updates the form actions element to reflect the current state of the page.\r\n   */\r\n  FormActions.prototype.update = function update() {\r\n    const numberOfSteps = userform.steps.length;\r\n    const stepID = userform.currentStep ? userform.currentStep.id : 0;\r\n    let i = null;\r\n    let lastStep = null;\r\n\r\n    // Update the \"Prev\" button.\r\n    this.$el.find('.step-button-prev')[stepID === 0 ? 'hide' : 'show']();\r\n\r\n    // Find last step, skipping hidden ones\r\n    for (i = numberOfSteps - 1; i >= 0; i--) {\r\n      lastStep = userform.steps[i];\r\n\r\n      // Skip if step is hidden\r\n      if (lastStep.conditionallyHidden()) {\r\n        continue;\r\n      }\r\n\r\n      // Update the \"Next\" button.\r\n      this.$el.find('.step-button-next')[stepID >= i ? 'hide' : 'show']();\r\n\r\n      // Update the \"Actions\".\r\n      this.$el.find('.Actions')[stepID >= i ? 'show' : 'hide']();\r\n\r\n      // Stop processing last step\r\n      break;\r\n    }\r\n  };\r\n\r\n  /**\r\n   * @func UserForm\r\n   * @constructor\r\n   * @param {object} element\r\n   * @return {object} - The UserForm instance.\r\n   * @desc The form\r\n   */\r\n  function UserForm(element) {\r\n    const self = this;\r\n\r\n    this.$el = element instanceof $ ? element : $(element);\r\n    this.steps = [];\r\n\r\n    // Add an error container which displays a list of invalid steps on form submission.\r\n    this.errorContainer = new ErrorContainer(this.$el.children('.error-container'));\r\n\r\n    // Listen for events triggered by form steps.\r\n    this.$el.on('userform.action.prev', () => {\r\n      self.prevStep();\r\n    });\r\n    this.$el.on('userform.action.next', () => {\r\n      self.nextStep();\r\n    });\r\n\r\n    // Listen for events triggered by the progress bar.\r\n    $('#userform-progress').on('userform.progress.changestep', (e, stepNumber) => {\r\n      self.jumpToStep(stepNumber - 1);\r\n    });\r\n\r\n    // When a field becomes valid, remove errors from the error container.\r\n    this.$el.on('userform.form.valid', (e, fieldId) => {\r\n      self.errorContainer.removeStepLink(fieldId);\r\n    });\r\n\r\n    this.$el.validate(this.validationOptions);\r\n\r\n    // Ensure checkbox groups are validated correctly\r\n    $('.optionset.requiredField input').each((a, field) => {\r\n      $(field).rules('add', {\r\n        required: true,\r\n      });\r\n    });\r\n\r\n    return this;\r\n  }\r\n\r\n  /*\r\n   * Default options for step validation. These get extended in main().\r\n   */\r\n  UserForm.prototype.validationOptions = {\r\n    ignore: ':hidden,ul',\r\n    errorClass: 'error',\r\n    errorElement: 'span',\r\n    errorPlacement: (error, element) => {\r\n      error.addClass('message');\r\n\r\n      if (element.is(':radio') || element.parents('.checkboxset').length > 0) {\r\n        error.appendTo(element.closest('.middleColumn'));\r\n      } else if (element.parents('.checkbox').length > 0) {\r\n        error.appendTo(element.closest('.field'));\r\n      } else {\r\n        error.insertAfter(element);\r\n      }\r\n    },\r\n    invalidHandler: (event, validator) => {\r\n      // setTimeout 0 so it runs after errorPlacement\r\n      setTimeout(() => {\r\n        validator.currentElements.filter('.error').first().focus();\r\n      }, 0);\r\n    },\r\n    // Callback for handling the actual submit when the form is valid.\r\n    // Submission in the jQuery.validate sence is handled at step level.\r\n    // So when the final step is submitted we have to also check all previous steps are valid.\r\n    submitHandler: (form) => {\r\n      let isValid = true;\r\n\r\n      // Validate the current step\r\n      if (userform.currentStep) {\r\n        userform.currentStep.valid = $(form).valid();\r\n      }\r\n\r\n      // Check for invalid previous steps.\r\n      $.each(userform.steps, (i, step) => {\r\n        if (!step.valid && !step.conditionallyHidden()) {\r\n          isValid = false;\r\n          userform.errorContainer.addStepLink(step);\r\n        }\r\n      });\r\n\r\n      if (isValid) {\r\n        // Remove required attributes on hidden fields\r\n        const field = $(form).find('.field.requiredField.hide input');\r\n        field.removeAttr('required aria-required data-rule-required');\r\n\r\n        // When using the \"are you sure?\" plugin, ensure the form immediately submits.\r\n        $(form).removeClass('dirty');\r\n\r\n        form.submit();\r\n      } else {\r\n        userform.errorContainer.show();\r\n      }\r\n    },\r\n    // When a field becomes valid.\r\n    success: (error) => {\r\n      const errorId = $(error).attr('id');\r\n      const fieldId = errorId.substr(0, errorId.indexOf('-error')).replace(/[\\\\[\\\\]]/, '');\r\n\r\n      // Remove square brackets since jQuery.validate.js uses idOrName,\r\n      // which breaks further on when using a selector that end with\r\n      // square brackets.\r\n\r\n      error.remove();\r\n\r\n      // Pass the field's ID with the event.\r\n      userform.$el.trigger('userform.form.valid', [fieldId]);\r\n    },\r\n  };\r\n\r\n  /**\r\n   * @func UserForm.addStep\r\n   * @param {object} step - An instance of FormStep.\r\n   * @desc Adds a step to the UserForm.\r\n   */\r\n  UserForm.prototype.addStep = function addStep(step) {\r\n    // Make sure we're dealing with a form step.\r\n    if (!step instanceof FormStep) {\r\n      return;\r\n    }\r\n\r\n    // eslint-disable-next-line no-param-reassign\r\n    step.id = this.steps.length;\r\n\r\n    this.steps.push(step);\r\n  };\r\n\r\n  /**\r\n   * @func UserForm.setCurrentStep\r\n   * @param {object} step - An instance of FormStep.\r\n   * @desc Sets the step the user is currently on.\r\n   */\r\n  UserForm.prototype.setCurrentStep = function setCurrentStep(step) {\r\n    // Make sure we're dealing with a form step.\r\n    if (!(step instanceof FormStep)) {\r\n      return;\r\n    }\r\n\r\n    this.currentStep = step;\r\n    this.currentStep.show();\r\n\r\n    // Record the user has viewed the step.\r\n    this.currentStep.viewed = true;\r\n    this.currentStep.$el.addClass('viewed');\r\n  };\r\n\r\n  /**\r\n   * @func UserForm.jumpToStep\r\n   * @param {number} stepNumber\r\n   * @param {boolean} [direction] - Defaults to forward (true).\r\n   * @desc Jumps to a specific form step.\r\n   */\r\n  UserForm.prototype.jumpToStep = function jumpToStep(stepNumber, direction) {\r\n    const targetStep = this.steps[stepNumber];\r\n    let isValid = false;\r\n    const forward = direction === void 0 ? true : direction;\r\n\r\n    // Make sure the target step exists.\r\n    if (targetStep === void 0) {\r\n      return;\r\n    }\r\n\r\n    // Make sure the step we're trying to set as current is not\r\n    // hidden by custom display rules. If it is then jump to the next step.\r\n    if (targetStep.conditionallyHidden()) {\r\n      if (forward) {\r\n        this.jumpToStep(stepNumber + 1);\r\n      } else {\r\n        this.jumpToStep(stepNumber - 1);\r\n      }\r\n\r\n      return;\r\n    }\r\n\r\n    // Validate the form.\r\n    // This well effectivly validate the current step and not the entire form.\r\n    // This is because hidden fields are excluded from validation, and all fields\r\n    // on all other steps, are currently hidden.\r\n    isValid = this.$el.valid();\r\n\r\n    // Set the 'valid' property on the current step.\r\n    this.currentStep.valid = isValid;\r\n\r\n    // Users can navigate to step's they've already viewed even if the current step is invalid.\r\n    if (isValid === false && targetStep.viewed === false) {\r\n      return;\r\n    }\r\n\r\n    this.currentStep.hide();\r\n    this.setCurrentStep(targetStep);\r\n\r\n    this.$el.trigger('userform.form.changestep', [targetStep.id]);\r\n  };\r\n\r\n  /**\r\n   * @func UserForm.nextStep\r\n   * @desc Advances the form to the next step.\r\n   */\r\n  UserForm.prototype.nextStep = function nextStep() {\r\n    this.jumpToStep(this.steps.indexOf(this.currentStep) + 1, true);\r\n  };\r\n\r\n  /**\r\n   * @func UserForm.prevStep\r\n   * @desc Goes back one step (not bound to browser history).\r\n   */\r\n  UserForm.prototype.prevStep = function prevStep() {\r\n    this.jumpToStep(this.steps.indexOf(this.currentStep) - 1, false);\r\n  };\r\n\r\n  /**\r\n   * @func main\r\n   * @desc Bootstraps the front-end.\r\n   */\r\n  function main(index, userformElement) {\r\n    const $userform = $(userformElement);\r\n\r\n    // If there's no userform, do nothing.\r\n    if ($userform.length === 0) {\r\n      return;\r\n    }\r\n\r\n    CONSTANTS.ENABLE_LIVE_VALIDATION = $userform.data('livevalidation') !== void 0;\r\n    CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP = $userform.data('toperrors') !== void 0;\r\n\r\n    // Extend the default validation options with conditional options\r\n    // that are set by the user in the CMS.\r\n    if (CONSTANTS.ENABLE_LIVE_VALIDATION === false) {\r\n      $.extend(UserForm.prototype.validationOptions, {\r\n        onfocusout: false,\r\n      });\r\n    }\r\n\r\n    if (CONSTANTS.DISPLAY_ERROR_MESSAGES_AT_TOP) {\r\n      $.extend(UserForm.prototype.validationOptions, {\r\n        // Callback for custom code when an invalid form / step is submitted.\r\n        invalidHandler: (event, validator) => {\r\n          $userform.trigger('userform.form.error', [validator]);\r\n        },\r\n        onfocusout: false,\r\n      });\r\n    }\r\n\r\n    // Display all the things that are hidden when JavaScript is disabled.\r\n    $('.userform-progress, .step-navigation').attr('aria-hidden', false).show();\r\n\r\n    // Extend classes with common functionality.\r\n    $.extend(FormStep.prototype, commonMixin);\r\n    $.extend(ErrorContainer.prototype, commonMixin);\r\n\r\n    userform = new UserForm($userform);\r\n\r\n    // Conditionally hide field labels and use HTML5 placeholder instead.\r\n    if (CONSTANTS.HIDE_FIELD_LABELS) {\r\n      $userform.find('label.left').each(() => {\r\n        const $label = $(this);\r\n\r\n        $(`[name=\"${$label.attr('for')}\"]`).attr('placeholder', $label.text());\r\n        $label.remove();\r\n      });\r\n    }\r\n\r\n    // Initialise the form steps.\r\n    userform.$el.find('.form-step').each((i, element) => {\r\n      const step = new FormStep(element);\r\n\r\n      userform.addStep(step);\r\n    });\r\n\r\n    userform.setCurrentStep(userform.steps[0]);\r\n\r\n    // Initialise actions and progressbar\r\n    const progressBar = new ProgressBar($('#userform-progress'));\r\n    progressBar.update(0);\r\n\r\n    const formActions = new FormActions($('#step-navigation'));\r\n    formActions.update();\r\n\r\n    // Enable jQuery UI datepickers\r\n    $(document).on('click', 'input.text[data-showcalendar]', () => {\r\n      const $element = $(this);\r\n\r\n      $element.ssDatepicker();\r\n\r\n      if ($element.data('datepicker')) {\r\n        $element.datepicker('show');\r\n      }\r\n    });\r\n\r\n    // Make sure the form doesn't expire on the user. Pings every 3 mins.\r\n    setInterval(() => {\r\n      $.ajax({ url: 'UserDefinedFormController/ping' });\r\n    }, 180 * 1000);\r\n\r\n    // Bind a confirmation message when navigating away from a partially completed form.\r\n    const form = $('form.userform');\r\n    if (typeof form.areYouSure !== 'undefined') {\r\n      form.areYouSure({\r\n        message: i18n._t('UserForms.LEAVE_CONFIRMATION', 'You have unsaved changes!'),\r\n      });\r\n    }\r\n  }\r\n\r\n  $('.userform').each(main);\r\n});\r\n\n\n\n// WEBPACK FOOTER //\n// ./client/src/bundles/UserForms.js","module.exports = i18n;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"i18n\"\n// module id = 2\n// module chunks = 0","module.exports = jQuery;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"jQuery\"\n// module id = 3\n// module chunks = 0"],"sourceRoot":""}